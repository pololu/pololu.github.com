<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: RPicSim::Xc8SymFile
  
    &mdash; Documentation by YARD 0.9.19
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "RPicSim::Xc8SymFile";
  relpath = '../';
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../_index.html">Index (X)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../RPicSim.html" title="RPicSim (module)">RPicSim</a></span></span>
     &raquo; 
    <span class="title">Xc8SymFile</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: RPicSim::Xc8SymFile
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">RPicSim::Xc8SymFile</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/rpicsim/xc8_sym_file.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>This class can be used to load an XC8 sym file and get the information
about the symbols in it.  This is useful because the COF file produced by
XC8 does not have enough information to identify what memory space every
symbol is in.</p>

<p>Example usage:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>MySim</span> <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="../RPicSim.html" title="RPicSim (module)">RPicSim</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Sim.html" title="RPicSim::Sim (class)">Sim</a></span></span>
  <span class='id identifier rubyid_use_device'>use_device</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>PIC18F25K50</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_use_file'>use_file</span> <span class='const'>DistDir</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>TestXC8.hex</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_import_symbols'>import_symbols</span> <span class='const'><span class='object_link'><a href="../RPicSim.html" title="RPicSim (module)">RPicSim</a></span></span><span class='op'>::</span><span class='const'>Xc8SymFile</span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="#initialize-instance_method" title="RPicSim::Xc8SymFile#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='const'>DistDir</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>TestXC8.sym</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>

  <span class='comment'># ...
</span><span class='kw'>end</span>
</code></pre>


  </div>
</div>
<div class="tags">
  

</div>



  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#symbols-instance_method" title="#symbols (instance method)">#<strong>symbols</strong>  &#x21d2; Hash </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns all the symbols.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#symbols_in_eeprom-instance_method" title="#symbols_in_eeprom (instance method)">#<strong>symbols_in_eeprom</strong>  &#x21d2; Hash </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns all the symbols in EEPROM.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#symbols_in_program_memory-instance_method" title="#symbols_in_program_memory (instance method)">#<strong>symbols_in_program_memory</strong>  &#x21d2; Hash </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns all the symbols in program memory.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#symbols_in_ram-instance_method" title="#symbols_in_ram (instance method)">#<strong>symbols_in_ram</strong>  &#x21d2; Hash </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns all the symbols in RAM.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(filename, opts = {})  &#x21d2; Xc8SymFile </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Creates a new instance of this class containing information from the
specified file.</p>
</div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(filename, opts = {})  &#x21d2; <tt><span class='object_link'><a href="" title="RPicSim::Xc8SymFile (class)">Xc8SymFile</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Creates a new instance of this class containing information from the
specified file.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>filename</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>opts</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Specified additional options.  The options are:</p>
<ul><li>
<p><code>:user_ram_sections</code>: Array of strings of section names that
should be considered to be in RAM.</p>
</li><li>
<p><code>:user_program_memory_sections</code>: Array of strings of section
names that should be considered to be in program memory.</p>
</li><li>
<p><code>:user_eeprom_sections</code>: Array of strings of section names that
should be considered to be in EEPROM.</p>
</li></ul>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rpicsim/xc8_sym_file.rb', line 64</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_filename'>filename</span><span class='comma'>,</span> <span class='id identifier rubyid_opts'>opts</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='ivar'>@symbols</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='ivar'>@symbols_in_ram</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='ivar'>@symbols_in_eeprom</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='ivar'>@symbols_in_program_memory</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>

  <span class='ivar'>@filename</span> <span class='op'>=</span> <span class='id identifier rubyid_filename'>filename</span>
  <span class='ivar'>@sections_in_ram</span> <span class='op'>=</span> <span class='qwords_beg'>%w{</span><span class='tstring_content'>ABS</span><span class='words_sep'> </span><span class='tstring_content'>BIGRAM</span><span class='words_sep'> </span><span class='tstring_content'>COMRAM</span><span class='words_sep'> </span><span class='tstring_content'>RAM</span><span class='words_sep'> </span><span class='tstring_content'>SFR</span><span class='words_sep'> </span><span class='tstring_content'>FARRAM</span><span class='words_sep'>
                        </span><span class='tstring_content'>BANK0</span><span class='words_sep'> </span><span class='tstring_content'>BANK1</span><span class='words_sep'> </span><span class='tstring_content'>BANK2</span><span class='words_sep'> </span><span class='tstring_content'>BANK3</span><span class='words_sep'> </span><span class='tstring_content'>BANK4</span><span class='words_sep'> </span><span class='tstring_content'>BANK5</span><span class='words_sep'> </span><span class='tstring_content'>BANK6</span><span class='words_sep'> </span><span class='tstring_content'>BANK7</span><span class='tstring_end'>}</span></span>
  <span class='ivar'>@sections_in_code</span> <span class='op'>=</span> <span class='qwords_beg'>%w{</span><span class='tstring_content'>CODE</span><span class='words_sep'> </span><span class='tstring_content'>CONST</span><span class='words_sep'> </span><span class='tstring_content'>IDLOC</span><span class='words_sep'> </span><span class='tstring_content'>MEDIUMCONST</span><span class='words_sep'> </span><span class='tstring_content'>SMALLCONST</span><span class='tstring_end'>}</span></span>
  <span class='ivar'>@sections_in_eeprom</span> <span class='op'>=</span> <span class='qwords_beg'>%w{</span><span class='tstring_content'>EEDATA</span><span class='tstring_end'>}</span></span>

  <span class='id identifier rubyid_allowed_keys'>allowed_keys</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='symbol'>:user_ram_sections</span><span class='comma'>,</span>
                  <span class='symbol'>:user_program_memory_sections</span><span class='comma'>,</span>
                  <span class='symbol'>:user_eeprom_sections</span><span class='comma'>,</span>
                  <span class='symbol'>:custom_ram_sections</span><span class='comma'>,</span>
                  <span class='symbol'>:custom_code_sections</span><span class='comma'>,</span>
                  <span class='symbol'>:custom_eeprom_sections</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_invalid_keys'>invalid_keys</span> <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span> <span class='op'>-</span> <span class='id identifier rubyid_allowed_keys'>allowed_keys</span>
  <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_invalid_keys'>invalid_keys</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Invalid options: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_invalid_keys'>invalid_keys</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='ivar'>@sections_in_ram</span> <span class='op'>+=</span> <span class='id identifier rubyid_opts'>opts</span><span class='period'>.</span><span class='id identifier rubyid_fetch'>fetch</span><span class='lparen'>(</span><span class='symbol'>:user_ram_sections</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='ivar'>@sections_in_code</span> <span class='op'>+=</span> <span class='id identifier rubyid_opts'>opts</span><span class='period'>.</span><span class='id identifier rubyid_fetch'>fetch</span><span class='lparen'>(</span><span class='symbol'>:user_program_memory_sections</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='ivar'>@sections_in_eeprom</span> <span class='op'>+=</span> <span class='id identifier rubyid_opts'>opts</span><span class='period'>.</span><span class='id identifier rubyid_fetch'>fetch</span><span class='lparen'>(</span><span class='symbol'>:user_eeprom_sections</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span>

  <span class='comment'># Legacy options introduced in 0.4.0, but deprecated now.
</span>  <span class='ivar'>@sections_in_ram</span> <span class='op'>+=</span> <span class='id identifier rubyid_opts'>opts</span><span class='period'>.</span><span class='id identifier rubyid_fetch'>fetch</span><span class='lparen'>(</span><span class='symbol'>:custom_ram_sections</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='ivar'>@sections_in_code</span> <span class='op'>+=</span> <span class='id identifier rubyid_opts'>opts</span><span class='period'>.</span><span class='id identifier rubyid_fetch'>fetch</span><span class='lparen'>(</span><span class='symbol'>:custom_code_sections</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='ivar'>@sections_in_eeprom</span> <span class='op'>+=</span> <span class='id identifier rubyid_opts'>opts</span><span class='period'>.</span><span class='id identifier rubyid_fetch'>fetch</span><span class='lparen'>(</span><span class='symbol'>:custom_eeprom_sections</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_read_data'>read_data</span>
  <span class='id identifier rubyid_sort_data'>sort_data</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <div class="method_details first">
  <h3 class="signature first" id="symbols-instance_method">
  
    #<strong>symbols</strong>  &#x21d2; <tt>Hash</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns all the symbols. The return value is a hash where the keys are the
names of the symbols (represented as Ruby symbols) and the values are the
addresses of the symbols.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


27
28
29</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rpicsim/xc8_sym_file.rb', line 27</span>

<span class='kw'>def</span> <span class='id identifier rubyid_symbols'>symbols</span>
  <span class='ivar'>@symbols</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="symbols_in_eeprom-instance_method">
  
    #<strong>symbols_in_eeprom</strong>  &#x21d2; <tt>Hash</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns all the symbols in EEPROM. The return value is a hash where the
keys are the names of the symbols (represented as Ruby symbols) and the
values are the addresses of the symbols.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


41
42
43</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rpicsim/xc8_sym_file.rb', line 41</span>

<span class='kw'>def</span> <span class='id identifier rubyid_symbols_in_eeprom'>symbols_in_eeprom</span>
  <span class='ivar'>@symbols_in_eeprom</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="symbols_in_program_memory-instance_method">
  
    #<strong>symbols_in_program_memory</strong>  &#x21d2; <tt>Hash</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns all the symbols in program memory. The return value is a hash where
the keys are the names of the symbols (represented as Ruby symbols) and the
values are the addresses of the symbols.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


48
49
50</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rpicsim/xc8_sym_file.rb', line 48</span>

<span class='kw'>def</span> <span class='id identifier rubyid_symbols_in_program_memory'>symbols_in_program_memory</span>
  <span class='ivar'>@symbols_in_program_memory</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="symbols_in_ram-instance_method">
  
    #<strong>symbols_in_ram</strong>  &#x21d2; <tt>Hash</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns all the symbols in RAM. The return value is a hash where the keys
are the names of the symbols (represented as Ruby symbols) and the values
are the addresses of the symbols.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


34
35
36</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rpicsim/xc8_sym_file.rb', line 34</span>

<span class='kw'>def</span> <span class='id identifier rubyid_symbols_in_ram'>symbols_in_ram</span>
  <span class='ivar'>@symbols_in_ram</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


</div>

      <div id="footer">
  
  <br/><br/>

  Generated on Wed Apr 17 15:05:27 2019 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.19 (ruby-2.5.3).
</div>

    </div>
  </body>
</html>