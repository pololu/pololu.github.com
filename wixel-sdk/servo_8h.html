<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Wixel SDK: include/servo.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.4 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="wixel_64.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Wixel SDK</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#define-members">Defines</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">include/servo.h File Reference</div>  </div>
</div>
<div class="contents">
<div class="textblock"><code>#include &lt;<a class="el" href="cc2511__map_8h_source.html">cc2511_map.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="cc2511__types_8h_source.html">cc2511_types.h</a>&gt;</code><br/>
</div>
<p><a href="servo_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="servo_8h.html#a0aab414da9be075736eec238ecc80601">SERVO_MAX_TARGET_MICROSECONDS</a>&#160;&#160;&#160;2500</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="servo_8h.html#ae52eb0f366b1b2168bbbbd60007418a2">SERVO_TICKS_PER_MICROSECOND</a>&#160;&#160;&#160;24</td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="servo_8h.html#aa4e5071a632bd502c031173578db6340">servosStart</a> (<a class="el" href="cc2511__types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> XDATA *pins, <a class="el" href="cc2511__types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> numPins)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="servo_8h.html#a1df3881afa364e869bccdf7dc9e65fa3">servosStop</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="cc2511__types_8h.html#a5cf13162aa17922ccb9c5f83f104ba49">BIT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="servo_8h.html#a69f47fb0e8793527ea9ce18587f261c6">servosStarted</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="cc2511__types_8h.html#a5cf13162aa17922ccb9c5f83f104ba49">BIT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="servo_8h.html#a35b6038daa9254ba6e85099fb68406a3">servosMoving</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="servo_8h.html#ac6231921a288e58c98ee5d72dd3675cc">servoSetTarget</a> (<a class="el" href="cc2511__types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> servoNum, <a class="el" href="cc2511__types_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> targetMicroseconds)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="cc2511__types_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="servo_8h.html#adb5200557875f97ffc90895c0da8b716">servoGetTarget</a> (<a class="el" href="cc2511__types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> servoNum)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="servo_8h.html#ac3b3da7970275a045d77bbf5025bae4f">servoSetSpeed</a> (<a class="el" href="cc2511__types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> servoNum, <a class="el" href="cc2511__types_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> speed)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="cc2511__types_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="servo_8h.html#af150acc098bd9782deaf5acd1243564c">servoGetSpeed</a> (<a class="el" href="cc2511__types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> servoNum)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="cc2511__types_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="servo_8h.html#ae10c64f23eacaaf08d1801fecd24bd3c">servoGetPosition</a> (<a class="el" href="cc2511__types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> servoNum)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="servo_8h.html#ac869098e34ff496d20f7b3929875d418">servoSetTargetHighRes</a> (<a class="el" href="cc2511__types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> servoNum, <a class="el" href="cc2511__types_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> target)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="cc2511__types_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="servo_8h.html#a9825acdcacab675e17c7f6adb3ebd71b">servoGetTargetHighRes</a> (<a class="el" href="cc2511__types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> servoNum)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="cc2511__types_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="servo_8h.html#aecb6f673697e097e05f02ba6cd356ac1">servoGetPositionHighRes</a> (<a class="el" href="cc2511__types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> servoNum)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="servo_8h.html#a6231d1454d9bdfe2e953915e8b628309">ISR</a> (T1, 0)</td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>The <code>servo.lib</code> library provides the ability to control up to 6 RC servos by generating digital pulses directly from your Wixel without the need for a separate servo controller.</p>
<p>This library uses Timer 1, so it will conflict with any other library that uses Timer 1.</p>
<p>With the exception of <a class="el" href="servo_8h.html#a1df3881afa364e869bccdf7dc9e65fa3">servosStop()</a>, the functions in this library are non-blocking. Pulses are generated in the background by Timer 1 and its interrupt service routine (ISR).</p>
<p>This library uses hardware PWM from Timer 1 to generate the servo pulses, so it can only generate servo pulses on the following pins:</p>
<ul>
<li>P0_2</li>
<li>P0_3</li>
<li>P0_4</li>
<li>P1_0</li>
<li>P1_1</li>
<li>P1_2</li>
</ul>
<p>The period of the servo signals generated by this library is approximately 19.11 ms (0x70000 clock cycles). The allowed pulse widths range from one 24th of a microsecond to 2500 microseconds, and the resolution available is one 24th of a microsecond.</p>
<p>For example code that uses this library, please see the <code>test_servos</code> app in the Wixel SDK's <code>apps</code> directory.</p>
<h2><a class="anchor" id="wiring"></a>
Wiring servos</h2>
<p>To control servos from your Wixel, you will need to wire them properly.</p>
<p>Most standard radio control servos have three wires, each a different color. Usually, they are either black, red, and white, or they are brown, red, and orange/yellow:</p>
<ul>
<li>brown or black = ground (GND, battery negative terminal)</li>
<li>red = servo power (Vservo, battery positive terminal)</li>
<li>orange, yellow, white, or blue = servo control signal line</li>
</ul>
<p>The ground and power wires of the servo will need to be connected to a power supply that provides a voltage the servo can tolerate and which provides enough current for the servo.</p>
<p>The ground wire of the servo also needs to be connected to one of the Wixel's GND pins. If you are powering the Wixel from the same power supply as the servos, then you have already made this connection.</p>
<p>The signal wire of the servo needs to connect to an I/O pin of the Wixel that will be outputting servo pulses. These pins are specified by the parameters to <a class="el" href="servo_8h.html#aa4e5071a632bd502c031173578db6340">servosStart()</a>.</p>
<h2><a class="anchor" id="more"></a>
More information about servos</h2>
<p>For more information about servos and how to control them, we recommend reading this series of blog posts by Pololu president Jan Malasek:</p>
<ol type="1">
<li><a href="http://www.pololu.com/blog/11/introduction-to-an-introduction-to-servos">Introduction to an introduction to servos</a></li>
<li><a href="http://www.pololu.com/blog/12/introduction-to-servos">Introduction to servos</a></li>
<li><a href="http://www.pololu.com/blog/13/gettin-all-up-in-your-servos">Gettin' all up in your servos</a></li>
<li><a href="http://www.pololu.com/blog/15/servo-servo-motor-servomotor-definitely-not-server">Servo, servo motor, servomotor (definitely not server)</a></li>
<li><a href="http://www.pololu.com/blog/16/electrical-characteristics-of-servos-and-introduction-to-the-servo-control-interface">Electrical characteristics of servos and introduction to the servo control interface</a></li>
<li><a href="http://www.pololu.com/blog/17/servo-control-interface-in-detail">Servo control interface in detail</a></li>
<li><a href="http://www.pololu.com/blog/18/simple-hardware-approach-to-controlling-a-servo">Simple hardware approach to controlling a servo</a></li>
<li><a href="http://www.pololu.com/blog/19/simple-microcontroller-approach-to-controlling-a-servo">Simple microcontroller approach to controlling a servo</a></li>
<li><a href="http://www.pololu.com/blog/20/advanced-hobby-servo-control-pulse-generation-using-hardware-pwm">Advanced hobby servo control pulse generation using hardware PWM</a></li>
<li><a href="http://www.pololu.com/blog/21/advanced-hobby-servo-control-using-only-a-timer-and-interrupts">Advanced hobby servo control using only a timer and interrupts</a></li>
<li><a href="http://www.pololu.com/blog/22/rc-servo-speed-control">RC servo speed control</a></li>
<li><a href="http://www.pololu.com/blog/24/continuous-rotation-servos-and-multi-turn-servos">Continuous-rotation servos and multi-turn servos</a> </li>
</ol>

<p>Definition in file <a class="el" href="servo_8h_source.html">servo.h</a>.</p>
</div><hr/><h2>Define Documentation</h2>
<a class="anchor" id="a0aab414da9be075736eec238ecc80601"></a><!-- doxytag: member="servo.h::SERVO_MAX_TARGET_MICROSECONDS" ref="a0aab414da9be075736eec238ecc80601" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SERVO_MAX_TARGET_MICROSECONDS&#160;&#160;&#160;2500</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The maximum allowed target of a servo, in microseconds. </p>

<p>Definition at line <a class="el" href="servo_8h_source.html#l00082">82</a> of file <a class="el" href="servo_8h_source.html">servo.h</a>.</p>

</div>
</div>
<a class="anchor" id="ae52eb0f366b1b2168bbbbd60007418a2"></a><!-- doxytag: member="servo.h::SERVO_TICKS_PER_MICROSECOND" ref="ae52eb0f366b1b2168bbbbd60007418a2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SERVO_TICKS_PER_MICROSECOND&#160;&#160;&#160;24</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This defines the units used by the high resolution functions in this library to represent positions and targets. </p>

<p>Definition at line <a class="el" href="servo_8h_source.html#l00086">86</a> of file <a class="el" href="servo_8h_source.html">servo.h</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a6231d1454d9bdfe2e953915e8b628309"></a><!-- doxytag: member="servo.h::ISR" ref="a6231d1454d9bdfe2e953915e8b628309" args="(T1, 0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ISR </td>
          <td>(</td>
          <td class="paramtype">T1&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">0&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Timer 1 interrupt. </p>

<p>Definition at line <a class="el" href="servo_8c_source.html#l00059">59</a> of file <a class="el" href="servo_8c_source.html">servo.c</a>.</p>

</div>
</div>
<a class="anchor" id="ae10c64f23eacaaf08d1801fecd24bd3c"></a><!-- doxytag: member="servo.h::servoGetPosition" ref="ae10c64f23eacaaf08d1801fecd24bd3c" args="(uint8 servoNum)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="cc2511__types_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> servoGetPosition </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cc2511__types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>servoNum</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">servoNum</td><td>A servo number between 0 and 5. This number should be less than the associated <b>numPins</b> parameter used in the last call to <a class="el" href="servo_8h.html#aa4e5071a632bd502c031173578db6340">servosStart()</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The current width in microseconds of pulses being sent to the specified servo. This will be equal to the last target set by <a class="el" href="servo_8h.html#ac6231921a288e58c98ee5d72dd3675cc">servoSetTarget()</a> unless there is a speed limit enabled for the servo.</dd></dl>
<p>Please note that this function does <em>not</em> return the actual physical position of the specified servo. This function returns the width of the pulses that are currently being sent to the servo, which is entirely determined by previous calls to <a class="el" href="servo_8h.html#ac6231921a288e58c98ee5d72dd3675cc">servoSetTarget()</a> and <a class="el" href="servo_8h.html#ac3b3da7970275a045d77bbf5025bae4f">servoSetSpeed()</a>. The standard RC servo interface provides no way to query a servo for its current position. </p>

<p>Definition at line <a class="el" href="servo_8c_source.html#l00323">323</a> of file <a class="el" href="servo_8c_source.html">servo.c</a>.</p>

</div>
</div>
<a class="anchor" id="aecb6f673697e097e05f02ba6cd356ac1"></a><!-- doxytag: member="servo.h::servoGetPositionHighRes" ref="aecb6f673697e097e05f02ba6cd356ac1" args="(uint8 servoNum)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="cc2511__types_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> servoGetPositionHighRes </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cc2511__types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>servoNum</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This is the high resolution version of <a class="el" href="servo_8h.html#ae10c64f23eacaaf08d1801fecd24bd3c">servoGetPosition()</a>. The units of the returned position are 24ths of a microsecond, so a value of 24000 corresponds to 1000 microseconds. </p>

<p>Definition at line <a class="el" href="servo_8c_source.html#l00333">333</a> of file <a class="el" href="servo_8c_source.html">servo.c</a>.</p>

</div>
</div>
<a class="anchor" id="af150acc098bd9782deaf5acd1243564c"></a><!-- doxytag: member="servo.h::servoGetSpeed" ref="af150acc098bd9782deaf5acd1243564c" args="(uint8 servoNum)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="cc2511__types_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> servoGetSpeed </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cc2511__types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>servoNum</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl class="return"><dt><b>Returns:</b></dt><dd>The speed of the specified servo.</dd></dl>
<p>See <a class="el" href="servo_8h.html#ac3b3da7970275a045d77bbf5025bae4f">servoSetSpeed()</a> for more information. </p>

<p>Definition at line <a class="el" href="servo_8c_source.html#l00349">349</a> of file <a class="el" href="servo_8c_source.html">servo.c</a>.</p>

</div>
</div>
<a class="anchor" id="adb5200557875f97ffc90895c0da8b716"></a><!-- doxytag: member="servo.h::servoGetTarget" ref="adb5200557875f97ffc90895c0da8b716" args="(uint8 servoNum)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="cc2511__types_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> servoGetTarget </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cc2511__types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>servoNum</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">servoNum</td><td>A servo number between 0 and 5. This number should be less than the associated <b>numPins</b> parameter used in the last call to <a class="el" href="servo_8h.html#aa4e5071a632bd502c031173578db6340">servosStart()</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The target position of the specified servo, in units of microseconds. </dd></dl>

<p>Definition at line <a class="el" href="servo_8c_source.html#l00318">318</a> of file <a class="el" href="servo_8c_source.html">servo.c</a>.</p>

</div>
</div>
<a class="anchor" id="a9825acdcacab675e17c7f6adb3ebd71b"></a><!-- doxytag: member="servo.h::servoGetTargetHighRes" ref="a9825acdcacab675e17c7f6adb3ebd71b" args="(uint8 servoNum)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="cc2511__types_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> servoGetTargetHighRes </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cc2511__types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>servoNum</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This is the high resolution version of <a class="el" href="servo_8h.html#adb5200557875f97ffc90895c0da8b716">servoGetTarget()</a>. The units of the returned target position are 24ths of a microsecond, so a value of 24000 corresponds to 1000 microseconds. </p>

<p>Definition at line <a class="el" href="servo_8c_source.html#l00328">328</a> of file <a class="el" href="servo_8c_source.html">servo.c</a>.</p>

</div>
</div>
<a class="anchor" id="ac3b3da7970275a045d77bbf5025bae4f"></a><!-- doxytag: member="servo.h::servoSetSpeed" ref="ac3b3da7970275a045d77bbf5025bae4f" args="(uint8 servoNum, uint16 speed)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void servoSetSpeed </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cc2511__types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>servoNum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="cc2511__types_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a>&#160;</td>
          <td class="paramname"><em>speed</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Sets the speed limit of the specified servo.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">servoNum</td><td>A servo number between 0 and 5. This number should be less than the associated <b>numPins</b> parameter used in the last call to <a class="el" href="servo_8h.html#aa4e5071a632bd502c031173578db6340">servosStart()</a>.</td></tr>
    <tr><td class="paramname">speed</td><td>The speed limit of the servo, or 0 for no speed limit. The valid values for this parameter are 0-65535.</td></tr>
  </table>
  </dd>
</dl>
<p>The speed limit is in units of 24ths of a microsecond per servo period, or 2.18 microseconds per second.</p>
<p>At a speed limit of 1, the servo output would take 459 seconds to move from 1 ms to 2 ms. More examples are shown in the table below:</p>
<table class="doxtable">
<caption align="bottom">Speed limit examples</caption>
<tr>
<th>Speed limit</th><th>Time to change output from 1 to 2 ms (s) </th></tr>
<tr>
<td>1</td><td>458.75 </td></tr>
<tr>
<td>7</td><td>65.54 </td></tr>
<tr>
<td>45</td><td>10.19 </td></tr>
<tr>
<td>91</td><td>5.04 </td></tr>
<tr>
<td>229</td><td>2.00 </td></tr>
<tr>
<td>458</td><td>1.00 </td></tr>
<tr>
<td>917</td><td>0.50 </td></tr>
<tr>
<td>S</td><td>458752 / (1000*S) </td></tr>
</table>

<p>Definition at line <a class="el" href="servo_8c_source.html#l00342">342</a> of file <a class="el" href="servo_8c_source.html">servo.c</a>.</p>

</div>
</div>
<a class="anchor" id="ac6231921a288e58c98ee5d72dd3675cc"></a><!-- doxytag: member="servo.h::servoSetTarget" ref="ac6231921a288e58c98ee5d72dd3675cc" args="(uint8 servoNum, uint16 targetMicroseconds)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void servoSetTarget </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cc2511__types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>servoNum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="cc2511__types_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a>&#160;</td>
          <td class="paramname"><em>targetMicroseconds</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Sets the specified servo's target position in units of microseconds.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">servoNum</td><td>A servo number between 0 and 5. This number should be less than the associated <b>numPins</b> parameter used in the last call to <a class="el" href="servo_8h.html#aa4e5071a632bd502c031173578db6340">servosStart()</a>.</td></tr>
    <tr><td class="paramname">targetMicroseconds</td><td>The target position of the servo in units of microseconds. A typical servo responds to pulse widths between 1000 and 2000 microseconds, so appropriate values for this parameter would be between 1000 and 2000. The full range of allowed values for this parameter is 0-2500. A value of 0 means to stop sending pulses, and takes effect immediately regardless of the speed limit for the servo.</td></tr>
  </table>
  </dd>
</dl>
<p>This is a non-blocking function that only takes a few microseconds to execute. Servos require much more time that that to actually reach the commanded position (on the order of hundreds of milliseconds).</p>
<p>Here is some example code:</p>
<div class="fragment"><pre class="fragment"><a class="code" href="servo_8h.html#ac6231921a288e58c98ee5d72dd3675cc">servoSetTarget</a>(0, 1000);  <span class="comment">// Start sending servo 0 to the 1000us position.</span>
<a class="code" href="servo_8h.html#ac6231921a288e58c98ee5d72dd3675cc">servoSetTarget</a>(1, 1500);  <span class="comment">// Start sending servo 1 to the 1500us position.</span>
<a class="code" href="servo_8h.html#ac6231921a288e58c98ee5d72dd3675cc">servoSetTarget</a>(2, 2000);  <span class="comment">// Start sending servo 2 to the 2000us position.</span>
</pre></div><p>If the speed limit of the servo is 0 (no speed limit), or the current target is 0, or the <b>targetMicroseconds</b> parameter is 0, then this function will have an immediate effect on the variable that represents the position of the servo (which is returned by <a class="el" href="servo_8h.html#ae10c64f23eacaaf08d1801fecd24bd3c">servoGetPosition()</a>). This allows you to perform sequences of commands like:</p>
<div class="fragment"><pre class="fragment"><a class="code" href="servo_8h.html#ac3b3da7970275a045d77bbf5025bae4f">servoSetSpeed</a>(0, 0);
<a class="code" href="servo_8h.html#ac6231921a288e58c98ee5d72dd3675cc">servoSetTarget</a>(0, 1000);  <span class="comment">// Immediately sets position variable to 1000.</span>
<a class="code" href="servo_8h.html#ac3b3da7970275a045d77bbf5025bae4f">servoSetSpeed</a>(0, 200);
<a class="code" href="servo_8h.html#ac6231921a288e58c98ee5d72dd3675cc">servoSetTarget</a>(2000);     <span class="comment">// Starts the position variable slowly changing from 1000 to 2000.</span>
</pre></div><p>or</p>
<div class="fragment"><pre class="fragment"><a class="code" href="servo_8h.html#ac3b3da7970275a045d77bbf5025bae4f">servoSetSpeed</a>(0, 200);
<a class="code" href="servo_8h.html#ac6231921a288e58c98ee5d72dd3675cc">servoSetTarget</a>(0, 0);     <span class="comment">// Immediately sets position variable to 0 (pulses off).</span>
<a class="code" href="servo_8h.html#ac6231921a288e58c98ee5d72dd3675cc">servoSetTarget</a>(0, 1000);  <span class="comment">// Immediately sets position variable to 1000.</span>
<a class="code" href="servo_8h.html#ac6231921a288e58c98ee5d72dd3675cc">servoSetTarget</a>(0, 2000);  <span class="comment">// Starts the position variable slowly changing from 1000 to 2000.</span>
</pre></div><p>These two sequences of commands each have the same effect, which is to immediately set the position variable for servo number 0 to 1000 microseconds and then slowly change it from 1000 to 2000 microseconds. Please note that the servo's actual physical position does not change immediately; it will lag behind the position variable. To make sure the servo actually reaches position 1000 before it starts moving towards 2000, you might want to add a delay after <code>servoSetTarget(0, 1000);</code>, but keep in mind that most other Wixel libraries require regular attention from the main loop.</p>
<p>If you need more than 1-microsecond resolution, see <a class="el" href="servo_8h.html#ac869098e34ff496d20f7b3929875d418">servoSetTargetHighRes()</a>. </p>

<p>Definition at line <a class="el" href="servo_8c_source.html#l00292">292</a> of file <a class="el" href="servo_8c_source.html">servo.c</a>.</p>

</div>
</div>
<a class="anchor" id="ac869098e34ff496d20f7b3929875d418"></a><!-- doxytag: member="servo.h::servoSetTargetHighRes" ref="ac869098e34ff496d20f7b3929875d418" args="(uint8 servoNum, uint16 target)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void servoSetTargetHighRes </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cc2511__types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>servoNum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="cc2511__types_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a>&#160;</td>
          <td class="paramname"><em>target</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This is the high resolution version of <a class="el" href="servo_8h.html#ac6231921a288e58c98ee5d72dd3675cc">servoSetTarget()</a>. The units of <b>target</b> are 24ths of a microsecond, so a value of 24000 corresponds to 1000 microseconds. </p>

<p>Definition at line <a class="el" href="servo_8c_source.html#l00298">298</a> of file <a class="el" href="servo_8c_source.html">servo.c</a>.</p>

</div>
</div>
<a class="anchor" id="a35b6038daa9254ba6e85099fb68406a3"></a><!-- doxytag: member="servo.h::servosMoving" ref="a35b6038daa9254ba6e85099fb68406a3" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="cc2511__types_8h.html#a5cf13162aa17922ccb9c5f83f104ba49">BIT</a> servosMoving </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl class="return"><dt><b>Returns:</b></dt><dd>1 if there are servos that are still moving towards their target position (limited by the speed limit), otherwise returns 0.</dd></dl>
<p>This function is equivalent to, but much faster than: </p>
<div class="fragment"><pre class="fragment"><a class="code" href="servo_8h.html#adb5200557875f97ffc90895c0da8b716">servoGetTarget</a>(0) == <a class="code" href="servo_8h.html#ae10c64f23eacaaf08d1801fecd24bd3c">servoGetPosition</a>(0) &amp;&amp;
<a class="code" href="servo_8h.html#adb5200557875f97ffc90895c0da8b716">servoGetTarget</a>(1) == <a class="code" href="servo_8h.html#ae10c64f23eacaaf08d1801fecd24bd3c">servoGetPosition</a>(1) &amp;&amp;
<a class="code" href="servo_8h.html#adb5200557875f97ffc90895c0da8b716">servoGetTarget</a>(2) == <a class="code" href="servo_8h.html#ae10c64f23eacaaf08d1801fecd24bd3c">servoGetPosition</a>(2) &amp;&amp;
<a class="code" href="servo_8h.html#adb5200557875f97ffc90895c0da8b716">servoGetTarget</a>(3) == <a class="code" href="servo_8h.html#ae10c64f23eacaaf08d1801fecd24bd3c">servoGetPosition</a>(3) &amp;&amp;
<a class="code" href="servo_8h.html#adb5200557875f97ffc90895c0da8b716">servoGetTarget</a>(4) == <a class="code" href="servo_8h.html#ae10c64f23eacaaf08d1801fecd24bd3c">servoGetPosition</a>(4) &amp;&amp;
<a class="code" href="servo_8h.html#adb5200557875f97ffc90895c0da8b716">servoGetTarget</a>(5) == <a class="code" href="servo_8h.html#ae10c64f23eacaaf08d1801fecd24bd3c">servoGetPosition</a>(5)
</pre></div> 
<p>Definition at line <a class="el" href="servo_8c_source.html#l00287">287</a> of file <a class="el" href="servo_8c_source.html">servo.c</a>.</p>

</div>
</div>
<a class="anchor" id="aa4e5071a632bd502c031173578db6340"></a><!-- doxytag: member="servo.h::servosStart" ref="aa4e5071a632bd502c031173578db6340" args="(uint8 XDATA *pins, uint8 numPins)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void servosStart </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cc2511__types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> XDATA *&#160;</td>
          <td class="paramname"><em>pins</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="cc2511__types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>numPins</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This function starts the library; it sets up the servo pins and the timer to be ready to send servo pulses. This function should be called before any other functions in the library.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">pins</td><td>A pointer to an array of pin numbers that specifies which pins will be used to generate servo pulses. The pin numbers used in this array are the same as the pin numbers used in the GPIO library (see <a class="el" href="gpio_8h.html">gpio.h</a>). There should be no repetitions in this array, and each entry must be one of:<ul>
<li>2 (for P0_2)</li>
<li>3 (for P0_3)</li>
<li>4 (for P0_4)</li>
<li>10 (for P1_0)</li>
<li>11 (for P1_1)</li>
<li>12 (for P1_2)</li>
</ul>
</td></tr>
    <tr><td class="paramname">numPins</td><td>The size of the pin number array.</td></tr>
  </table>
  </dd>
</dl>
<p>The pins specified in the <b>pins</b> array will be configured as digital outputs, their targets will be initialized to 0 (no pulses), and their speed limits will be initialized to 0 (no speed limit).</p>
<p>If the <b>pins</b> parameter is 0 (a null pointer), then this function skips the initialization of the pins and the internal data structures of the library. This means that the servo pin assignments, positions, targets, and speeds from before will be preserved.</p>
<p>The parameters to this function define the correspondence of servo numbers to pins. The <b>servoNum</b> parameter in the other library functions can be thought of as an index in the <b>pins</b> array. For example, a <b>servoNumber</b> of 0 corresponds to <code>pins[0]</code>, the first pin in the array.</p>
<p>Example code:</p>
<div class="fragment"><pre class="fragment"><a class="code" href="cc2511__types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> <a class="code" href="cc2511__types_8h.html#ae6527c8381eb3f23b7fd6d6efec6ffc7">CODE</a> pins[] = {10, 12};  <span class="comment">// Use P1_0 and P1_2 for servos.</span>
<a class="code" href="servo_8h.html#aa4e5071a632bd502c031173578db6340">servosStart</a>((<a class="code" href="cc2511__types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> <a class="code" href="cc2511__types_8h.html#a40236c8c1d02f94f1fb4669ca607769d">XDATA</a> *)pins, <span class="keyword">sizeof</span>(pins));
<a class="code" href="servo_8h.html#ac6231921a288e58c98ee5d72dd3675cc">servoSetTarget</a>(0, 1500);       <span class="comment">// Affects pin P1_0</span>
<a class="code" href="servo_8h.html#ac6231921a288e58c98ee5d72dd3675cc">servoSetTarget</a>(1, 1500);       <span class="comment">// Affects pin P1_2</span>
</pre></div> 
<p>Definition at line <a class="el" href="servo_8c_source.html#l00170">170</a> of file <a class="el" href="servo_8c_source.html">servo.c</a>.</p>

</div>
</div>
<a class="anchor" id="a69f47fb0e8793527ea9ce18587f261c6"></a><!-- doxytag: member="servo.h::servosStarted" ref="a69f47fb0e8793527ea9ce18587f261c6" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="cc2511__types_8h.html#a5cf13162aa17922ccb9c5f83f104ba49">BIT</a> servosStarted </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl class="return"><dt><b>Returns:</b></dt><dd>1 if the library is currently active and using Timer 1, or 0 if the library is stopped.</dd></dl>
<p>Calling <a class="el" href="servo_8h.html#aa4e5071a632bd502c031173578db6340">servosStart()</a> changes this value to 1. Calling <a class="el" href="servo_8h.html#a1df3881afa364e869bccdf7dc9e65fa3">servosStop()</a> changes this value to 0.</p>
<p>Timer 1 can be used for other purposes while the servo library is stopped. </p>

<p>Definition at line <a class="el" href="servo_8c_source.html#l00282">282</a> of file <a class="el" href="servo_8c_source.html">servo.c</a>.</p>

</div>
</div>
<a class="anchor" id="a1df3881afa364e869bccdf7dc9e65fa3"></a><!-- doxytag: member="servo.h::servosStop" ref="a1df3881afa364e869bccdf7dc9e65fa3" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void servosStop </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Stops the library; stops sending servo pulses and turns off Timer 1. After this function runs, the pins that were used for servo pulses will all be configured as general-purpose digital outputs driving low.</p>
<p>You can later restart the servo pulses by calling <a class="el" href="servo_8h.html#aa4e5071a632bd502c031173578db6340">servosStart()</a>.</p>
<p>This is a blocking function that can take up to 2.8 milliseconds to finish because it ensures that the pulses are shut off cleanly without any glitches. </p>

<p>Definition at line <a class="el" href="servo_8c_source.html#l00256">256</a> of file <a class="el" href="servo_8c_source.html">servo.c</a>.</p>

</div>
</div>
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Thu Oct 13 2011 17:15:12 for Wixel SDK by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
