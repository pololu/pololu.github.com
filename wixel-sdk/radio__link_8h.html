<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<title>Wixel SDK: include/radio_link.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="wixel_64.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Wixel SDK
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">radio_link.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;<a class="el" href="cc2511__types_8h_source.html">cc2511_types.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="radio__mac_8h_source.html">radio_mac.h</a>&gt;</code><br />
</div>
<p><a href="radio__link_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ae7ce31ad7050a39d9776fa28653b3e5f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="radio__link_8h.html#ae7ce31ad7050a39d9776fa28653b3e5f">RADIO_LINK_PAYLOAD_SIZE</a>&#160;&#160;&#160;18</td></tr>
<tr class="separator:ae7ce31ad7050a39d9776fa28653b3e5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a123096a89c9d0a95d3f893c583b902b3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="radio__link_8h.html#a123096a89c9d0a95d3f893c583b902b3">RADIO_LINK_MAX_PAYLOAD_TYPE</a>&#160;&#160;&#160;15</td></tr>
<tr class="separator:a123096a89c9d0a95d3f893c583b902b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a57fa3833c4114eff20e9bb0a0c568852"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="radio__link_8h.html#a57fa3833c4114eff20e9bb0a0c568852">radioLinkInit</a> (void)</td></tr>
<tr class="separator:a57fa3833c4114eff20e9bb0a0c568852"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79365613b8f776746873755ef2406644"><td class="memItemLeft" align="right" valign="top"><a class="el" href="cc2511__types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="radio__link_8h.html#a79365613b8f776746873755ef2406644">radioLinkTxAvailable</a> (void)</td></tr>
<tr class="separator:a79365613b8f776746873755ef2406644"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe7071114c9322797579377454e83349"><td class="memItemLeft" align="right" valign="top"><a class="el" href="cc2511__types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="radio__link_8h.html#abe7071114c9322797579377454e83349">radioLinkTxQueued</a> (void)</td></tr>
<tr class="separator:abe7071114c9322797579377454e83349"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a981ad99a67b230efcd579303031e7646"><td class="memItemLeft" align="right" valign="top"><a class="el" href="cc2511__types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> <a class="el" href="cc2511__types_8h.html#a40236c8c1d02f94f1fb4669ca607769d">XDATA</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="radio__link_8h.html#a981ad99a67b230efcd579303031e7646">radioLinkTxCurrentPacket</a> (void)</td></tr>
<tr class="separator:a981ad99a67b230efcd579303031e7646"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86391d706420a54d26cee340def5a337"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="radio__link_8h.html#a86391d706420a54d26cee340def5a337">radioLinkTxSendPacket</a> (<a class="el" href="cc2511__types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> payloadType)</td></tr>
<tr class="separator:a86391d706420a54d26cee340def5a337"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c0fc485a32582696f95d745f4a3d339"><td class="memItemLeft" align="right" valign="top"><a class="el" href="cc2511__types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> <a class="el" href="cc2511__types_8h.html#a40236c8c1d02f94f1fb4669ca607769d">XDATA</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="radio__link_8h.html#a3c0fc485a32582696f95d745f4a3d339">radioLinkRxCurrentPacket</a> (void)</td></tr>
<tr class="separator:a3c0fc485a32582696f95d745f4a3d339"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adeab7d055296245ce27fda07601c0294"><td class="memItemLeft" align="right" valign="top"><a class="el" href="cc2511__types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="radio__link_8h.html#adeab7d055296245ce27fda07601c0294">radioLinkRxCurrentPayloadType</a> (void)</td></tr>
<tr class="separator:adeab7d055296245ce27fda07601c0294"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8acc73b55d0b16510613e0c790138d7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="radio__link_8h.html#ae8acc73b55d0b16510613e0c790138d7">radioLinkRxDoneWithPacket</a> (void)</td></tr>
<tr class="separator:ae8acc73b55d0b16510613e0c790138d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a043a2cdc8d396e008c951c1ebf3da88a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="cc2511__types_8h.html#a5cf13162aa17922ccb9c5f83f104ba49">BIT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="radio__link_8h.html#a043a2cdc8d396e008c951c1ebf3da88a">radioLinkConnected</a> (void)</td></tr>
<tr class="separator:a043a2cdc8d396e008c951c1ebf3da88a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a617ee1a94407bccbd5090bd1460a1152"><td class="memItemLeft" align="right" valign="top"><a class="el" href="cc2511__types_8h.html#ac44d0188f4f50fd9b03031c1a06bd0a9">int32</a> <a class="el" href="cc2511__types_8h.html#ae6527c8381eb3f23b7fd6d6efec6ffc7">CODE</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="radio__link_8h.html#a617ee1a94407bccbd5090bd1460a1152">param_radio_channel</a></td></tr>
<tr class="separator:a617ee1a94407bccbd5090bd1460a1152"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c0c7bab2deeb85a8bb24311e761ea55"><td class="memItemLeft" align="right" valign="top">volatile <a class="el" href="cc2511__types_8h.html#a5cf13162aa17922ccb9c5f83f104ba49">BIT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="radio__link_8h.html#a7c0c7bab2deeb85a8bb24311e761ea55">radioLinkResetPacketReceived</a></td></tr>
<tr class="separator:a7c0c7bab2deeb85a8bb24311e761ea55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73c86915bf4a1f3c995139e3cc80dd53"><td class="memItemLeft" align="right" valign="top">volatile <a class="el" href="cc2511__types_8h.html#a5cf13162aa17922ccb9c5f83f104ba49">BIT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="radio__link_8h.html#a73c86915bf4a1f3c995139e3cc80dd53">radioLinkActivityOccurred</a></td></tr>
<tr class="separator:a73c86915bf4a1f3c995139e3cc80dd53"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The <code>radio_link.lib</code> library provides reliable, ordered delivery and reception of a series of data packets between two Wixels on the same frequency. This is the library that takes care of Ping/ACK/NAK packets and handles the details of timing. This library defines radio packet memory buffers and controls access to those buffers.</p>
<p>This library does not work if there are more than two Wixels broadcasting on the same channel. For wireless communication between more than two Wixels, you can use <code>radio_queue.lib</code> (see <a class="el" href="radio__queue_8h.html">radio_queue.h</a>).</p>
<p>Similarly, this library also restricts the Wixels to only having one logical data pipe. If you want to send some extra data that doesn't get NAKed, or gets NAKed at different times then the regular data, you would need to replace this library with something more complicated that keeps track of different streams and schedules them.</p>
<p>This library depends on <code>radio_mac.lib</code>, which uses an interrupt. For this library to work, you must write <code>include &lt;<a class="el" href="radio__link_8h.html">radio_link.h</a>&gt;</code> in the source file that contains your main() function. </p>

<p>Definition in file <a class="el" href="radio__link_8h_source.html">radio_link.h</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a123096a89c9d0a95d3f893c583b902b3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RADIO_LINK_MAX_PAYLOAD_TYPE&#160;&#160;&#160;15</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Each packet has a "Payload Type" attached to it, which is a number between 0 and <a class="el" href="radio__link_8h.html#a123096a89c9d0a95d3f893c583b902b3">RADIO_LINK_MAX_PAYLOAD_TYPE</a>. The meanings of the different payload types can be defined by higher-level code. </p>

<p>Definition at line <a class="el" href="radio__link_8h_source.html#l00040">40</a> of file <a class="el" href="radio__link_8h_source.html">radio_link.h</a>.</p>

</div>
</div>
<a class="anchor" id="ae7ce31ad7050a39d9776fa28653b3e5f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RADIO_LINK_PAYLOAD_SIZE&#160;&#160;&#160;18</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Each packet can contain at most 18 bytes of payload. This limit is imposed by the <code>radio_link.lib</code> library, not the CC2511. </p>

<p>Definition at line <a class="el" href="radio__link_8h_source.html#l00034">34</a> of file <a class="el" href="radio__link_8h_source.html">radio_link.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a043a2cdc8d396e008c951c1ebf3da88a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="cc2511__types_8h.html#a5cf13162aa17922ccb9c5f83f104ba49">BIT</a> radioLinkConnected </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>1 if a connection to another Wixel has been established.</dd></dl>
<p>Currently the radio_link library does not detect disconnection, so this value will never change from 1 to 0. </p>

<p>Definition at line <a class="el" href="radio__link_8c_source.html#l00138">138</a> of file <a class="el" href="radio__link_8c_source.html">radio_link.c</a>.</p>

</div>
</div>
<a class="anchor" id="a57fa3833c4114eff20e9bb0a0c568852"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void radioLinkInit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initializes the <code>radio_link.lib</code> library and the lower-level libraries that it depends on. This must be called before any other functions in the library. </p>

<p>Definition at line <a class="el" href="radio__link_8c_source.html#l00105">105</a> of file <a class="el" href="radio__link_8c_source.html">radio_link.c</a>.</p>

</div>
</div>
<a class="anchor" id="a3c0fc485a32582696f95d745f4a3d339"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="cc2511__types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> <a class="el" href="cc2511__types_8h.html#a40236c8c1d02f94f1fb4669ca607769d">XDATA</a>* radioLinkRxCurrentPacket </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>A pointer to the current RX packet. This is the earliest packet received from the other Wixel which has not yet been processed yet by higher-level code. Returns 0 if there is no RX packet available.</dd></dl>
<p>The RX packet has the same format as the TX packet: the length of the payload is at offset 0 and the data starts at offset 1.</p>
<p>When you are done reading the packet you should call <a class="el" href="radio__link_8h.html#ae8acc73b55d0b16510613e0c790138d7">radioLinkRxDoneWithPacket()</a> to advance to the next packet. </p>

<p>Definition at line <a class="el" href="radio__link_8c_source.html#l00191">191</a> of file <a class="el" href="radio__link_8c_source.html">radio_link.c</a>.</p>

</div>
</div>
<a class="anchor" id="adeab7d055296245ce27fda07601c0294"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="cc2511__types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> radioLinkRxCurrentPayloadType </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>The payload type of the current RX packet. This number was the argument to <a class="el" href="radio__link_8h.html#a86391d706420a54d26cee340def5a337">radioLinkTxSendPacket()</a> on the other Wixel.</dd></dl>
<p>This should only be called if <a class="el" href="radio__link_8h.html#a3c0fc485a32582696f95d745f4a3d339">radioLinkRxCurrentPacket()</a> recently returned a non-zero pointer. </p>

<p>Definition at line <a class="el" href="radio__link_8c_source.html#l00201">201</a> of file <a class="el" href="radio__link_8c_source.html">radio_link.c</a>.</p>

</div>
</div>
<a class="anchor" id="ae8acc73b55d0b16510613e0c790138d7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void radioLinkRxDoneWithPacket </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Frees the current RX packet so that you can advance to processing the next one. See the <a class="el" href="radio__link_8h.html#a3c0fc485a32582696f95d745f4a3d339">radioLinkRxCurrentPacket()</a> documentation for details. </p>

<p>Definition at line <a class="el" href="radio__link_8c_source.html#l00206">206</a> of file <a class="el" href="radio__link_8c_source.html">radio_link.c</a>.</p>

</div>
</div>
<a class="anchor" id="a79365613b8f776746873755ef2406644"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="cc2511__types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> radioLinkTxAvailable </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>The number of radio TX packet buffers that are currently free (available to hold data). </dd></dl>

<p>Definition at line <a class="el" href="radio__link_8c_source.html#l00145">145</a> of file <a class="el" href="radio__link_8c_source.html">radio_link.c</a>.</p>

</div>
</div>
<a class="anchor" id="a981ad99a67b230efcd579303031e7646"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="cc2511__types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> <a class="el" href="cc2511__types_8h.html#a40236c8c1d02f94f1fb4669ca607769d">XDATA</a>* radioLinkTxCurrentPacket </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>A pointer to the current TX packet, or 0 if no packet is available.</dd></dl>
<p>To populate this packet, you should write the length of the payload data (which must not exceed <a class="el" href="radio__link_8h.html#ae7ce31ad7050a39d9776fa28653b3e5f">RADIO_LINK_PAYLOAD_SIZE</a>) to offset 0, and write the data starting at offset 1. After you have put this data in the packet, call <a class="el" href="radio__link_8h.html#a86391d706420a54d26cee340def5a337">radioLinkTxSendPacket()</a> to actually queue the packet up to be sent on the radio. Example usage: </p><div class="fragment"><div class="line"><a class="code" href="cc2511__types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> <a class="code" href="cc2511__types_8h.html#a40236c8c1d02f94f1fb4669ca607769d">XDATA</a> * packet = <a class="code" href="radio__link_8h.html#a981ad99a67b230efcd579303031e7646">radioLinkTxCurrentPacket</a>();</div>
<div class="line"><span class="keywordflow">if</span> (packet != 0)</div>
<div class="line">{</div>
<div class="line">    packet[0] = 3;   <span class="comment">// payload length.  Must not exceed RADIO_LINK_PAYLOAD_SIZE.</span></div>
<div class="line">    packet[1] = <span class="charliteral">&#39;a&#39;</span>;</div>
<div class="line">    packet[2] = <span class="charliteral">&#39;b&#39;</span>;</div>
<div class="line">    packet[3] = <span class="charliteral">&#39;c&#39;</span>;</div>
<div class="line">    <a class="code" href="radio__link_8h.html#a86391d706420a54d26cee340def5a337">radioLinkTxSendPacket</a>(0);</div>
<div class="line">}</div>
</div><!-- fragment --><p>This function has no side effects. </p>

<p>Definition at line <a class="el" href="radio__link_8c_source.html#l00156">156</a> of file <a class="el" href="radio__link_8c_source.html">radio_link.c</a>.</p>

</div>
</div>
<a class="anchor" id="abe7071114c9322797579377454e83349"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="cc2511__types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> radioLinkTxQueued </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>The number of radio TX packet buffers that are currently busy (holding a data packet that has not been successfully sent yet). </dd></dl>

<p>Definition at line <a class="el" href="radio__link_8c_source.html#l00151">151</a> of file <a class="el" href="radio__link_8c_source.html">radio_link.c</a>.</p>

</div>
</div>
<a class="anchor" id="a86391d706420a54d26cee340def5a337"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void radioLinkTxSendPacket </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cc2511__types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>payloadType</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sends the current TX packet. See the documentation of <a class="el" href="radio__link_8h.html#a981ad99a67b230efcd579303031e7646">radioLinkTxCurrentPacket()</a> for details.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">payloadType</td><td>A number between 0 and RADIO_LINK_MAX_PACKET_TYPE that will be attached to the packet. This can be used to specify what type of data the packet contains. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="radio__link_8c_source.html#l00166">166</a> of file <a class="el" href="radio__link_8c_source.html">radio_link.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="a617ee1a94407bccbd5090bd1460a1152"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="cc2511__types_8h.html#ac44d0188f4f50fd9b03031c1a06bd0a9">int32</a> <a class="el" href="cc2511__types_8h.html#ae6527c8381eb3f23b7fd6d6efec6ffc7">CODE</a> param_radio_channel</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Defines the frequency to use. Valid values are from 0 to 255. To avoid interference, the channel numbers of different Wixel pairs operating in the should be at least 2 apart. (This is a Wixel App parameter; the user can set it using the Wixel Configuration Utility.) </p>

<p>Definition at line <a class="el" href="radio__link_8c_source.html#l00020">20</a> of file <a class="el" href="radio__link_8c_source.html">radio_link.c</a>.</p>

</div>
</div>
<a class="anchor" id="a73c86915bf4a1f3c995139e3cc80dd53"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile <a class="el" href="cc2511__types_8h.html#a5cf13162aa17922ccb9c5f83f104ba49">BIT</a> radioLinkActivityOccurred</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The library will set this bit to 1 whenever it receives a packet that has payload data in it or sends a packet. Higher-level code may check this bit and clear it. </p>

<p>Definition at line <a class="el" href="radio__link_8c_source.html#l00101">101</a> of file <a class="el" href="radio__link_8c_source.html">radio_link.c</a>.</p>

</div>
</div>
<a class="anchor" id="a7c0c7bab2deeb85a8bb24311e761ea55"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile <a class="el" href="cc2511__types_8h.html#a5cf13162aa17922ccb9c5f83f104ba49">BIT</a> radioLinkResetPacketReceived</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This bit allows the higher-level code to detect when a reset packet is received. It is set to 1 in an interrupt by the <code>radio_link.lib</code> library whenever a reset packet is received. The higher-level code should set it to zero when it uses this information.</p>
<p>A reset packet will be received whenever the other Wixel is reset for any reason. Multiple reset packets can also be received in quick succession if the other device does not receive the acknowledgment packet sent by this device (every radio packet has a chance of being lost). This situation is indistinguishable from the situation where the other party is actually getting reset several times in quick succession.</p>
<p>If the higher-level code responds to this bit by sending an initialization packet to the other device, then it should clear <a class="el" href="radio__link_8h.html#a7c0c7bab2deeb85a8bb24311e761ea55">radioLinkResetPacketReceived</a> BEFORE queueing the packet to be sent. Otherwise, the following sequence of events could occur:</p><ol type="1">
<li>Main Loop: This device detects a reset packet (<a class="el" href="radio__link_8h.html#a7c0c7bab2deeb85a8bb24311e761ea55">radioLinkResetPacketReceived</a>==1).</li>
<li>Main Loop: This device queues initialization packet to be sent.</li>
<li>ISR: This device sends an initialization packet.</li>
<li>ISR: This device receives a reset packet because other device got reset.</li>
<li>This device clears the <a class="el" href="radio__link_8h.html#a7c0c7bab2deeb85a8bb24311e761ea55">radioLinkResetPacketReceived</a>.</li>
</ol>
<p>By clearing the bit first, you guarantee that an initialization packet will be sent AFTER the final reset packet is received.</p>
<p>Example use: </p><div class="fragment"><div class="line"><span class="keywordflow">if</span> (<a class="code" href="radio__link_8h.html#a7c0c7bab2deeb85a8bb24311e761ea55">radioLinkResetPacketReceived</a> &amp;&amp; <a class="code" href="radio__link_8h.html#a79365613b8f776746873755ef2406644">radioLinkTxAvailable</a>())</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="cc2511__types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> <a class="code" href="cc2511__types_8h.html#a40236c8c1d02f94f1fb4669ca607769d">XDATA</a> * packet;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// A reset packet from the other party was received, so send</span></div>
<div class="line">    <span class="comment">// a packet to initialize the connection.</span></div>
<div class="line"></div>
<div class="line">    <span class="comment">// Clear the flag.  This must be done BEFORE queueing the packet</span></div>
<div class="line">    <span class="comment">// to be sent, as discussed in radio_link.h</span></div>
<div class="line">    <a class="code" href="radio__link_8h.html#a7c0c7bab2deeb85a8bb24311e761ea55">radioLinkResetPacketReceived</a> = 0;</div>
<div class="line"></div>
<div class="line">    packet = <a class="code" href="radio__link_8h.html#a79365613b8f776746873755ef2406644">radioLinkTxAvailable</a>();</div>
<div class="line">    packet[0] = INIT_PACKET_LENGTH;  <span class="comment">// defined by higher-level code</span></div>
<div class="line">    packet[1] = INIT_PACKET_PAYLOAD; <span class="comment">// defined by higher-level code</span></div>
<div class="line">    <a class="code" href="radio__link_8h.html#a86391d706420a54d26cee340def5a337">radioLinkTxSendPacket</a>(INIT_PACKET_PAYLOAD_TYPE);</div>
<div class="line">}</div>
</div><!-- fragment --> 
<p>Definition at line <a class="el" href="radio__link_8c_source.html#l00081">81</a> of file <a class="el" href="radio__link_8c_source.html">radio_link.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Jul 7 2014 11:03:55 for Wixel SDK by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.7
</small></address>
</body>
</html>
