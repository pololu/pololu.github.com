<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Wixel SDK: include/i2c.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.4 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="wixel_64.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Wixel SDK</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">include/i2c.h File Reference</div>  </div>
</div>
<div class="contents">
<div class="textblock"><code>#include &lt;<a class="el" href="cc2511__types_8h_source.html">cc2511_types.h</a>&gt;</code><br/>
</div>
<p><a href="i2c_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8h.html#a7ddafb84bfe054e007df553e4d94fbbd">i2cSetFrequency</a> (<a class="el" href="cc2511__types_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> freqKHz)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8h.html#a5b349338e29cf7dbf34703fc8f92b8ab">i2cSetTimeout</a> (<a class="el" href="cc2511__types_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> timeoutMs)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8h.html#a4323564528b406e399646dadb8226079">i2cStart</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8h.html#a46f365de216a017131a0fdc53067b741">i2cStop</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="cc2511__types_8h.html#a5cf13162aa17922ccb9c5f83f104ba49">BIT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8h.html#a2dcdd72b927032e377e2df7b76bdd198">i2cWriteByte</a> (<a class="el" href="cc2511__types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> byte)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="cc2511__types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8h.html#accd5b9d398a37317a54db52fc9dc193b">i2cReadByte</a> (<a class="el" href="cc2511__types_8h.html#a5cf13162aa17922ccb9c5f83f104ba49">BIT</a> nack)</td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="cc2511__types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> DATA&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8h.html#abb58510b9ec5c353225c645fae0acfc4">i2cPinScl</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="cc2511__types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> DATA&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8h.html#a753049a5a3b77a4d3c21d707cd9ef9c0">i2cPinSda</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="cc2511__types_8h.html#a5cf13162aa17922ccb9c5f83f104ba49">BIT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8h.html#ac4954a553f8abc91c95c858b1ede50ae">i2cTimeoutOccurred</a></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>The <code>i2c.lib</code> library provides a basic software (bit-banging) implementation of a master node for I<sup>2</sup>C communication (the CC2511 does not have a hardware I<sup>2</sup>C module). This library does not support multi-master I<sup>2</sup>C buses.</p>
<p>By default, the SCL pin is assigned to P1_0, the SDA pin is assigned to P1_1, and the bus frequency is 100 kHz with a 10 ms timeout. </p>

<p>Definition in file <a class="el" href="i2c_8h_source.html">i2c.h</a>.</p>
</div><hr/><h2>Function Documentation</h2>
<a class="anchor" id="accd5b9d398a37317a54db52fc9dc193b"></a><!-- doxytag: member="i2c.h::i2cReadByte" ref="accd5b9d398a37317a54db52fc9dc193b" args="(BIT nack)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="cc2511__types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> i2cReadByte </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cc2511__types_8h.html#a5cf13162aa17922ccb9c5f83f104ba49">BIT</a>&#160;</td>
          <td class="paramname"><em>nack</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Reads a byte from the I<sup>2</sup>C bus (performs a master receive).</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">nack</td><td>If 1, a NACK will be sent to the slave device instead of an ACK after this byte is received. (This is used to signal conclusion of a transfer from the slave to the master.)</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The byte received from the slave device. This return value is not meaningful if a timeout occurs during the read transaction (indicated by the <a class="el" href="i2c_8h.html#ac4954a553f8abc91c95c858b1ede50ae">i2cTimeoutOccurred</a> flag). </dd></dl>

<p>Definition at line <a class="el" href="i2c_8c_source.html#l00217">217</a> of file <a class="el" href="i2c_8c_source.html">i2c.c</a>.</p>

</div>
</div>
<a class="anchor" id="a7ddafb84bfe054e007df553e4d94fbbd"></a><!-- doxytag: member="i2c.h::i2cSetFrequency" ref="a7ddafb84bfe054e007df553e4d94fbbd" args="(uint16 freqKHz)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void i2cSetFrequency </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cc2511__types_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a>&#160;</td>
          <td class="paramname"><em>freqKHz</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Sets the I<sup>2</sup>C bus clock frequency. This implementation limits the range of possible frequencies to 2-500 kHz; because of rounding inaccuracies and timing constraints, the actual frequency might be lower than the selected frequency, but it is guaranteed never to be higher. The default frequency is 100 kHz. Common I<sup>2</sup>C speeds are 10 kHz (low speed), 100 kHz (standard), and 400 kHz (high speed).</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">freqKHz</td><td>Frequency in kHz. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="i2c_8c_source.html#l00035">35</a> of file <a class="el" href="i2c_8c_source.html">i2c.c</a>.</p>

</div>
</div>
<a class="anchor" id="a5b349338e29cf7dbf34703fc8f92b8ab"></a><!-- doxytag: member="i2c.h::i2cSetTimeout" ref="a5b349338e29cf7dbf34703fc8f92b8ab" args="(uint16 timeoutMs)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void i2cSetTimeout </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cc2511__types_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a>&#160;</td>
          <td class="paramname"><em>timeoutMs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Sets the allowed delay before a low SCL line causes an I<sup>2</sup>C bus timeout, which aborts the I<sup>2</sup>C transaction and sets the <a class="el" href="i2c_8h.html#ac4954a553f8abc91c95c858b1ede50ae">i2cTimeoutOccurred</a> flag. The default timeout is 10 ms.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">timeoutMs</td><td>Timeout in milliseconds. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="i2c_8c_source.html#l00048">48</a> of file <a class="el" href="i2c_8c_source.html">i2c.c</a>.</p>

</div>
</div>
<a class="anchor" id="a4323564528b406e399646dadb8226079"></a><!-- doxytag: member="i2c.h::i2cStart" ref="a4323564528b406e399646dadb8226079" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void i2cStart </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Generates an I<sup>2</sup>C START condition. </p>

<p>Definition at line <a class="el" href="i2c_8c_source.html#l00111">111</a> of file <a class="el" href="i2c_8c_source.html">i2c.c</a>.</p>

</div>
</div>
<a class="anchor" id="a46f365de216a017131a0fdc53067b741"></a><!-- doxytag: member="i2c.h::i2cStop" ref="a46f365de216a017131a0fdc53067b741" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void i2cStop </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Generates an I<sup>2</sup>C STOP condition. </p>

<p>Definition at line <a class="el" href="i2c_8c_source.html#l00093">93</a> of file <a class="el" href="i2c_8c_source.html">i2c.c</a>.</p>

</div>
</div>
<a class="anchor" id="a2dcdd72b927032e377e2df7b76bdd198"></a><!-- doxytag: member="i2c.h::i2cWriteByte" ref="a2dcdd72b927032e377e2df7b76bdd198" args="(uint8 byte)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="cc2511__types_8h.html#a5cf13162aa17922ccb9c5f83f104ba49">BIT</a> i2cWriteByte </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cc2511__types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>byte</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Writes a byte to the I<sup>2</sup>C bus (performs a master transmit).</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">byte</td><td>The byte to be transmitted.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 if an ACK is received from the slave device, 1 if a NACK is received. This return value is not meaningful if a timeout occurs during the write transaction (indicated by the <a class="el" href="i2c_8h.html#ac4954a553f8abc91c95c858b1ede50ae">i2cTimeoutOccurred</a> flag). </dd></dl>

<p>Definition at line <a class="el" href="i2c_8c_source.html#l00190">190</a> of file <a class="el" href="i2c_8c_source.html">i2c.c</a>.</p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="abb58510b9ec5c353225c645fae0acfc4"></a><!-- doxytag: member="i2c.h::i2cPinScl" ref="abb58510b9ec5c353225c645fae0acfc4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="cc2511__types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> DATA <a class="el" href="i2c_8h.html#abb58510b9ec5c353225c645fae0acfc4">i2cPinScl</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Number of the pin to use as the SCL (clock) line of the I<sup>2</sup>C bus. See the <a class="el" href="gpio_8h.html">gpio.h</a> documentation for pin number values. </p>

<p>Definition at line <a class="el" href="i2c_8c_source.html#l00016">16</a> of file <a class="el" href="i2c_8c_source.html">i2c.c</a>.</p>

</div>
</div>
<a class="anchor" id="a753049a5a3b77a4d3c21d707cd9ef9c0"></a><!-- doxytag: member="i2c.h::i2cPinSda" ref="a753049a5a3b77a4d3c21d707cd9ef9c0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="cc2511__types_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> DATA <a class="el" href="i2c_8h.html#a753049a5a3b77a4d3c21d707cd9ef9c0">i2cPinSda</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Number of the pin to use as the SDA (data) line of the I<sup>2</sup>C bus. See the <a class="el" href="gpio_8h.html">gpio.h</a> documentation for pin number values. </p>

<p>Definition at line <a class="el" href="i2c_8c_source.html#l00017">17</a> of file <a class="el" href="i2c_8c_source.html">i2c.c</a>.</p>

</div>
</div>
<a class="anchor" id="ac4954a553f8abc91c95c858b1ede50ae"></a><!-- doxytag: member="i2c.h::i2cTimeoutOccurred" ref="ac4954a553f8abc91c95c858b1ede50ae" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="cc2511__types_8h.html#a5cf13162aa17922ccb9c5f83f104ba49">BIT</a> <a class="el" href="i2c_8h.html#ac4954a553f8abc91c95c858b1ede50ae">i2cTimeoutOccurred</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This bit is a flag that is set whenever a timeout occurs on the I<sup>2</sup>C bus waiting for the SCL line to go high. The flag must be manually cleared after being read. The <a class="el" href="i2c_8h.html#a5b349338e29cf7dbf34703fc8f92b8ab">i2cSetTimeout()</a> function can be used to specify the timeout delay. </p>

<p>Definition at line <a class="el" href="i2c_8c_source.html#l00029">29</a> of file <a class="el" href="i2c_8c_source.html">i2c.c</a>.</p>

</div>
</div>
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Thu Feb 21 2013 11:40:08 for Wixel SDK by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
