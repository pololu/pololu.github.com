<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Romi32U4 library: Romi32U4Encoders Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Romi32U4 library
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="class_romi32_u4_encoders-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Romi32U4Encoders Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Reads counts from the encoders on the Romi 32U4.  
 <a href="class_romi32_u4_encoders.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_romi32_u4_encoders_8h_source.html">Romi32U4Encoders.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a3b023cb2a55a48b67ca2902ebc515d4b"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_romi32_u4_encoders.html#a3b023cb2a55a48b67ca2902ebc515d4b">init</a> ()</td></tr>
<tr class="separator:a3b023cb2a55a48b67ca2902ebc515d4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33993ac1a6d28a4a8a8e319304e8ee91"><td class="memItemLeft" align="right" valign="top">static int16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_romi32_u4_encoders.html#a33993ac1a6d28a4a8a8e319304e8ee91">getCountsLeft</a> ()</td></tr>
<tr class="separator:a33993ac1a6d28a4a8a8e319304e8ee91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1d87799c6d60ab3f893f78f3a747979"><td class="memItemLeft" align="right" valign="top">static int16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_romi32_u4_encoders.html#ad1d87799c6d60ab3f893f78f3a747979">getCountsRight</a> ()</td></tr>
<tr class="separator:ad1d87799c6d60ab3f893f78f3a747979"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1fe086b0b93e823764a6348fb8ce277"><td class="memItemLeft" align="right" valign="top">static int16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_romi32_u4_encoders.html#ad1fe086b0b93e823764a6348fb8ce277">getCountsAndResetLeft</a> ()</td></tr>
<tr class="separator:ad1fe086b0b93e823764a6348fb8ce277"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a23565316cdc4ae2695aaa1735d7fe1"><td class="memItemLeft" align="right" valign="top">static int16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_romi32_u4_encoders.html#a0a23565316cdc4ae2695aaa1735d7fe1">getCountsAndResetRight</a> ()</td></tr>
<tr class="separator:a0a23565316cdc4ae2695aaa1735d7fe1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c050069ed04c7a9be1e6f34e009f40b"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_romi32_u4_encoders.html#a1c050069ed04c7a9be1e6f34e009f40b">checkErrorLeft</a> ()</td></tr>
<tr class="separator:a1c050069ed04c7a9be1e6f34e009f40b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa225ef61513c48b38cd5620ca01a7186"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_romi32_u4_encoders.html#aa225ef61513c48b38cd5620ca01a7186">checkErrorRight</a> ()</td></tr>
<tr class="separator:aa225ef61513c48b38cd5620ca01a7186"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Reads counts from the encoders on the Romi 32U4. </p>
<p>This class allows you to read counts from the encoders on the Romi 32U4, which lets you tell how much each motor has turned and in what direction.</p>
<p>The encoders are monitored in the background using interrupts, so your code can perform other tasks without missing encoder counts.</p>
<p>To read the left encoder, this class uses an interrupt service routine (ISR) for PCINT0_vect, so there will be a compile-time conflict with any other code that defines a pin-change ISR.</p>
<p>To read the right encoder, this class calls <a href="http://arduino.cc/en/Reference/attachInterrupt">attachInterrupt()</a>, so there will be a compile-time conflict with any other code that defines an ISR for an external interrupt directly instead of using attachInterrupt().</p>
<p>The standard Romi motors have a gear ratio of 3952:33 (approximately 120:1). The standard Romi encoders give 12 counts per revolution. Therefore, one revolution of a Romi wheel corresponds to 12*3952/33 (approximately 1437.09) encoder counts as returned by this library. </p>

<p class="definition">Definition at line <a class="el" href="_romi32_u4_encoders_8h_source.html#l00031">31</a> of file <a class="el" href="_romi32_u4_encoders_8h_source.html">Romi32U4Encoders.h</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a1c050069ed04c7a9be1e6f34e009f40b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c050069ed04c7a9be1e6f34e009f40b">&#9670;&nbsp;</a></span>checkErrorLeft()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Romi32U4Encoders::checkErrorLeft </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This function returns true if an error was detected on the left-side encoder. It resets the error flag automatically, so it will only return true if an error was detected since the last time <a class="el" href="class_romi32_u4_encoders.html#a1c050069ed04c7a9be1e6f34e009f40b">checkErrorLeft()</a> was called.</p>
<p>If an error happens, it means that both of the encoder outputs changed at the same time from the perspective of the ISR, so the ISR was unable to tell what direction the motor was moving, and the encoder count could be inaccurate. The most likely cause for an error is that the interrupt service routine for the encoders could not be started soon enough. If you get encoder errors, make sure you are not disabling interrupts for extended periods of time in your code. </p>

<p class="definition">Definition at line <a class="el" href="_romi32_u4_encoders_8cpp_source.html#l00133">133</a> of file <a class="el" href="_romi32_u4_encoders_8cpp_source.html">Romi32U4Encoders.cpp</a>.</p>

</div>
</div>
<a id="aa225ef61513c48b38cd5620ca01a7186"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa225ef61513c48b38cd5620ca01a7186">&#9670;&nbsp;</a></span>checkErrorRight()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Romi32U4Encoders::checkErrorRight </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This function is just like <a class="el" href="class_romi32_u4_encoders.html#a1c050069ed04c7a9be1e6f34e009f40b">checkErrorLeft()</a> except it applies to the right-side encoder. </p>

<p class="definition">Definition at line <a class="el" href="_romi32_u4_encoders_8cpp_source.html#l00142">142</a> of file <a class="el" href="_romi32_u4_encoders_8cpp_source.html">Romi32U4Encoders.cpp</a>.</p>

</div>
</div>
<a id="ad1fe086b0b93e823764a6348fb8ce277"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1fe086b0b93e823764a6348fb8ce277">&#9670;&nbsp;</a></span>getCountsAndResetLeft()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int16_t Romi32U4Encoders::getCountsAndResetLeft </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This function is just like <a class="el" href="class_romi32_u4_encoders.html#a33993ac1a6d28a4a8a8e319304e8ee91">getCountsLeft()</a> except it also clears the counts before returning. If you call this frequently enough, you will not have to worry about the count overflowing. </p>

<p class="definition">Definition at line <a class="el" href="_romi32_u4_encoders_8cpp_source.html#l00111">111</a> of file <a class="el" href="_romi32_u4_encoders_8cpp_source.html">Romi32U4Encoders.cpp</a>.</p>

</div>
</div>
<a id="a0a23565316cdc4ae2695aaa1735d7fe1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a23565316cdc4ae2695aaa1735d7fe1">&#9670;&nbsp;</a></span>getCountsAndResetRight()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int16_t Romi32U4Encoders::getCountsAndResetRight </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This function is just like <a class="el" href="class_romi32_u4_encoders.html#ad1fe086b0b93e823764a6348fb8ce277">getCountsAndResetLeft()</a> except it applies to the right-side encoder. </p>

<p class="definition">Definition at line <a class="el" href="_romi32_u4_encoders_8cpp_source.html#l00122">122</a> of file <a class="el" href="_romi32_u4_encoders_8cpp_source.html">Romi32U4Encoders.cpp</a>.</p>

</div>
</div>
<a id="a33993ac1a6d28a4a8a8e319304e8ee91"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a33993ac1a6d28a4a8a8e319304e8ee91">&#9670;&nbsp;</a></span>getCountsLeft()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int16_t Romi32U4Encoders::getCountsLeft </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns the number of counts that have been detected from the left-side encoder. These counts start at 0. Positive counts correspond to forward movement of the left side of the Romi, while negative counts correspond to backwards movement.</p>
<p>The count is returned as a signed 16-bit integer. When the count goes over 32767, it will overflow down to -32768. When the count goes below -32768, it will overflow up to 32767. </p>

<p class="definition">Definition at line <a class="el" href="_romi32_u4_encoders_8cpp_source.html#l00091">91</a> of file <a class="el" href="_romi32_u4_encoders_8cpp_source.html">Romi32U4Encoders.cpp</a>.</p>

</div>
</div>
<a id="ad1d87799c6d60ab3f893f78f3a747979"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1d87799c6d60ab3f893f78f3a747979">&#9670;&nbsp;</a></span>getCountsRight()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int16_t Romi32U4Encoders::getCountsRight </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This function is just like <a class="el" href="class_romi32_u4_encoders.html#a33993ac1a6d28a4a8a8e319304e8ee91">getCountsLeft()</a> except it applies to the right-side encoder. </p>

<p class="definition">Definition at line <a class="el" href="_romi32_u4_encoders_8cpp_source.html#l00101">101</a> of file <a class="el" href="_romi32_u4_encoders_8cpp_source.html">Romi32U4Encoders.cpp</a>.</p>

</div>
</div>
<a id="a3b023cb2a55a48b67ca2902ebc515d4b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b023cb2a55a48b67ca2902ebc515d4b">&#9670;&nbsp;</a></span>init()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void Romi32U4Encoders::init </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This function initializes the encoders if they have not been initialized already and starts listening for counts. This function is called automatically whenever you call any other function in this class, so you should not normally need to call it in your code. </p>

<p class="definition">Definition at line <a class="el" href="_romi32_u4_encoders_8h_source.html#l00040">40</a> of file <a class="el" href="_romi32_u4_encoders_8h_source.html">Romi32U4Encoders.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="_romi32_u4_encoders_8h_source.html">Romi32U4Encoders.h</a></li>
<li><a class="el" href="_romi32_u4_encoders_8cpp_source.html">Romi32U4Encoders.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
